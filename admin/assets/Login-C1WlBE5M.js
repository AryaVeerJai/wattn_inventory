import{k as b,j as e,N as v,r as t,L as S}from"./index-CRtHqgNh.js";import{b as L,c as d,a as o}from"./index.esm-fLyxJGpA.js";import{C as m,a as i}from"./CRow-2H-OSIFE.js";import{C as k}from"./CCardGroup-CYAH1CNb.js";import{C as p,a as h}from"./CCardBody-DDKYtY5O.js";import{C as I}from"./CForm-BhaeeLrX.js";import{C as x,a as u}from"./CInputGroupText-Ez1qrbwP.js";import{c as E,a as T}from"./cil-user-Dlmw-Gem.js";import{C as g}from"./CFormInput-B9Cf93_D.js";import"./CFormControlWrapper-QynTV90e.js";import"./CFormControlValidation-nH6k3xNp.js";import"./CFormLabel-S0AgFI1E.js";const P=""+new URL("wattn_logo_main-D8zEuPu3.webp",import.meta.url).href,M=()=>{const j=b();if(localStorage.getItem("authToken"))return e.jsx(v,{to:"/dashboard",replace:!0});const[C,f]=t.useState(""),[y,N]=t.useState(""),[F,n]=t.useState(""),[c,l]=t.useState(!1),w=async s=>{s.preventDefault(),l(!0);try{const a=await fetch("http://143.244.137.105:4000/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C,password:y})}),r=await a.json();console.log(r),a.ok&&r.success?(localStorage.setItem("authToken",r.token),localStorage.setItem("user",JSON.stringify(r.user)),j("/dashboard")):n(r.message||"Invalid credentials or server error")}catch{n("An error occurred while logging in")}finally{l(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsxs(L,{className:"text-center",children:[e.jsx("img",{width:"20%",src:P}),e.jsx(m,{className:"mt-4 justify-content-center",children:e.jsx(i,{md:8,children:e.jsxs(k,{children:[e.jsx(p,{className:"p-4",children:e.jsx(h,{children:e.jsxs(I,{onSubmit:w,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(x,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(d,{icon:E})}),e.jsx(g,{placeholder:"Username",autoComplete:"username",onChange:s=>f(s.target.value)})]}),e.jsxs(x,{className:"mb-4",children:[e.jsx(u,{children:e.jsx(d,{icon:T})}),e.jsx(g,{type:"password",placeholder:"Password",autoComplete:"current-password",onChange:s=>N(s.target.value)})]}),e.jsxs(m,{children:[e.jsx(i,{xs:6,children:e.jsx(o,{color:"primary",className:"px-4",type:"submit",disabled:c,children:c?"Logging in...":"Login"})}),e.jsx(i,{xs:6,className:"text-right",children:e.jsx(o,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),e.jsx(p,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(h,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),e.jsx(S,{to:"/register",children:e.jsx(o,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})]})})};export{M as default};
